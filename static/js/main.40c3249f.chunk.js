(this.webpackJsonpdashboard=this.webpackJsonpdashboard||[]).push([[0],{51:function(e,a,t){},53:function(e,a,t){},97:function(e,a,t){"use strict";t.r(a);var c=t(0),s=t.n(c),n=t(12),i=t.n(n),r=(t(51),t(19)),d=t.n(r),l=t(37),o=t(38),h=t(39),j=t(46),m=t(45),b=(t.p,t(53),t(54),t(40)),u=t.n(b),g=t(10),f=t.n(g),y=t(20),v=t.n(y),x=t(103),p=t(44),O=t(1),N=function(e){Object(j.a)(t,e);var a=Object(m.a)(t);function t(e){var c;return Object(o.a)(this,t),(c=a.call(this,e)).state={cardsData:[],dataFromJson:{},heatmapFromJson:{},dataFromJson2:{},heatmapFromJson2:{},plotsData:[],plotLayout:[],heatMapData:[],heatMapLayout:[],heatMapConfig:[],categoryToday:"",city:"",dateUpdated:"",lastChangeDate:"",selectedType:"aggressive"},c}return Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;u.a.init({key:"1-VF4_JFPZ5-mZGqdx0y0X_9CIc6WY-RMzeQjvxXNvZE",callback:function(a){console.log("google sheet data ---\x3e",a),e.setState({cardsData:a})},simpleSheet:!0}),this.getData()}},{key:"getData",value:function(){var e=Object(l.a)(d.a.mark((function e(){var a,t,c,s=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("https://raw.githubusercontent.com/aberrantdoc/policydashboard/master/district_data/actual.json").then((function(e){s.setState({dataFromJson:e.data})}));case 2:return e.next=4,f.a.get("https://raw.githubusercontent.com/aberrantdoc/policydashboard/master/district_data/demo.json").then((function(e){s.setState({heatmapFromJson:e.data})}));case 4:return e.next=6,f.a.get("https://raw.githubusercontent.com/aberrantdoc/policydashboard/master/district_data/agg_actual.json").then((function(e){s.setState({dataFromJson2:e.data})}));case 6:return e.next=8,f.a.get("https://raw.githubusercontent.com/aberrantdoc/policydashboard/master/district_data/agg_demo.json").then((function(e){s.setState({heatmapFromJson2:e.data})}));case 8:a=[],t=this.state.dataFromJson&&Object.keys(this.state.dataFromJson),c=this.state.dataFromJson2&&Object.keys(this.state.dataFromJson2),(a="conservative"===this.state.selectedType?t:c).pop(),this.setState({city:a[0]}),this.setData(a[0]);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setData",value:function(e){var a="conservative"===this.state.selectedType?this.state.dataFromJson:this.state.dataFromJson2,t="conservative"===this.state.selectedType?this.state.heatmapFromJson:this.state.heatmapFromJson2;if(a){var c=[{type:"indicator",mode:"number+gauge",value:a[e].pct_ICU[a[e].pct_ICU.length-1],number:{suffix:"%",font:{size:20}},align:"right",domain:{x:[.5,1],y:[.05,.15]},title:{text:"ICU Vacancy (%)  ",font:{size:20}},gauge:{shape:"bullet",axis:{range:[null,100]},threshold:{line:{color:"3d3d5c",width:2},thickness:.75,value:a[e].pct_ICU[a[e].pct_ICU.length-14]},steps:[{range:[0,40],color:"ff4d4d"},{range:[40,80],color:"FFBF00"},{range:[80,100],color:"238823"}],bar:{color:"1f1f2e"}}},{type:"indicator",mode:"number+gauge",value:a[e].daily_tests_per_million_14ma[a[e].daily_tests_per_million_14ma.length-1],number:{font:{size:20}},align:"right",domain:{x:[.5,1],y:[.22,.32]},title:{text:"Tests Per Million  ",font:{size:20}},gauge:{shape:"bullet",axis:{range:[null,5e3]},threshold:{line:{color:"3d3d5c",width:2},thickness:.75,value:a[e].daily_tests_per_million_14ma[a[e].daily_tests_per_million_14ma.length-14]},steps:[{range:[0,140],color:"ff4d4d"},{range:[140,5e3],color:"238823"}],bar:{color:"1f1f2e"}}},{type:"indicator",mode:"number+gauge",value:a[e].TPR[a[e].TPR.length-1],number:{suffix:"%",font:{size:20}},align:"right",domain:{x:[.5,1],y:[.39,.49]},title:{text:"Tests Positivity (%)  ",font:{size:20}},gauge:{shape:"bullet",axis:{range:[null,100]},threshold:{line:{color:"3d3d5c",width:2},thickness:.75,value:a[e].TPR[a[e].TPR.length-14]},steps:[{range:[0,5],color:"238823"},{range:[5,10],color:"FFBF00"},{range:[10,100],color:"ff4d4d"}],bar:{color:"1f1f2e"}}},{type:"indicator",mode:"number+gauge",value:a[e].rate_increase_new_cases[a[e].rate_increase_new_cases.length-1],number:{suffix:"%",font:{size:20}},align:"right",domain:{x:[.5,1],y:[.56,.66]},title:{text:"Case Growth Rate (%)  ",font:{size:20}},gauge:{shape:"bullet",axis:{range:[-50,100]},threshold:{line:{color:"3d3d5c",width:2},thickness:.75,value:a[e].rate_increase_new_cases[a[e].rate_increase_new_cases.length-14]},steps:[{range:[-50,2],color:"238823"},{range:[2,5],color:"FFBF00"},{range:[5,100],color:"ff4d4d"}],bar:{color:"1f1f2e"}}},{type:"indicator",mode:"number+gauge",value:a[e].daily_cases_per_million[a[e].daily_cases_per_million.length-1],number:{font:{size:20}},align:"right",domain:{x:[.5,1],y:[.73,.83]},title:{text:"Cases Per Million  ",font:{size:20}},gauge:{shape:"bullet",axis:{range:[null,2e3]},threshold:{line:{color:"3d3d5c",width:2},thickness:.75,value:a[e].daily_cases_per_million[a[e].daily_cases_per_million.length-14]},steps:[{range:[0,20],color:"238823"},{range:[20,100],color:"FFBF00"},{range:[100,2e3],color:"ff4d4d"}],bar:{color:"1f1f2e"}}}],s=t[e].category,n=[{z:[(s=(s=(s=(s=s.map((function(e){return e.replace("GRAY",3)}))).map((function(e){return e.replace("YELLOW",2)}))).map((function(e){return e.replace("GREEN",1)}))).map((function(e){return e.replace("RED",0)}))).slice(s.length-90)],colorscale:[[0,"rgb(255, 77, 77)"],[.33,"rgb(255, 77, 77)"],[.33,"#238823"],[.67,"#238823"],[.67,"#ffbf00"],[1,"#ffbf00"]],type:"heatmap",showscale:!1,y:[" "]}],i=a[e].category[a[e].category.length-1],r=a[e].dates[a[e].dates.length-1],d=t[e].is_change,l=d[d.length-1],o=d.reverse().findIndex((function(e){return e!==l}));d.reverse();var h=t[e].dates,j=h.reverse()[o];h.reverse(),this.setState({plotsData:c,plotLayout:{width:750,height:500,margin:{t:10,r:25,l:25,b:10}},heatMapData:n,heatMapLayout:{width:500,height:50,margin:{t:10,r:25,l:25,b:10}},heatMapConfig:{responsive:!0},categoryToday:i,dateUpdated:r,lastChangeDate:j})}}},{key:"selectCity",value:function(e){this.setState({city:e}),this.setData(e)}},{key:"switchApproach",value:function(){var e=this;this.setState({selectedType:"conservative"===this.state.selectedType?"aggressive":"conservative"},(function(){e.setData(e.state.city)}))}},{key:"render",value:function(){var e=this,a=this.state.cardsData,t=this.state.categoryToday&&this.state.categoryToday.toLowerCase().charAt(0).toUpperCase()+this.state.categoryToday.toLowerCase().slice(1),c=a.filter((function(e){return"Medical Preparedness"===e.Domain})),s="";c.forEach((function(e){"1"===e[t]&&(s+="- ",s+=e.Policy,s+="\n")})),console.log(s);var n=a.filter((function(e){return"Mobility"===e.Domain})),i="";n.forEach((function(e){"1"===e[t]&&(i+="- ",i+=e.Policy,i+="\n")}));var r=a.filter((function(e){return"Testing"===e.Domain})),d="";r.forEach((function(e){"1"===e[t]&&(d+="- ",d+=e.Policy,d+="\n")}));var l=a.filter((function(e){return"Closures"===e.Domain})),o="";l.forEach((function(e){"1"===e[t]&&(o+="- ",o+=e.Policy,o+="\n")}));var h=a.filter((function(e){return"Contact Tracing"===e.Domain})),j="";h.forEach((function(e){"1"===e[t]&&(j+="- ",j+=e.Policy,j+="\n")}));var m=a.filter((function(e){return"Communication"===e.Domain})),b="";m.forEach((function(e){"1"===e[t]&&(b+="- ",b+=e.Policy,b+="\n")}));var u=a.filter((function(e){return"Data"===e.Domain})),g="";u.forEach((function(e){"1"===e[t]&&(g+="- ",g+=e.Policy,g+="\n")}));var f=a.filter((function(e){return"Public Leadership"===e.Domain})),y="";f.forEach((function(e){"1"===e[t]&&(y+="- ",y+=e.Policy,y+="\n")}));var N=a.filter((function(e){return"Vaccinations"===e.Domain})),_="";N.forEach((function(e){"1"===e[t]&&(_+="- ",_+=e.Policy,_+="\n")}));var C=a.filter((function(e){return"Gatherings"===e.Domain})),k="";C.forEach((function(e){"1"===e[t]&&(k+="- ",k+=e.Policy,k+="\n")}));var D=a.filter((function(e){return"Mask Wearing and Ventilation"===e.Domain})),T="";D.forEach((function(e){"1"===e[t]&&(T+="- ",T+=e.Policy,T+="\n")}));var F=a.filter((function(e){return"Physical Distancing and Hygiene"===e.Domain})),w="";return F.forEach((function(e){"1"===e[t]&&(w+="- ",w+=e.Policy,w+="\n")})),Object(O.jsxs)("div",{className:"App",children:[Object(O.jsx)("div",{className:"heading jumbotron-fluid",style:{backgroundColor:"black"},children:Object(O.jsx)("div",{className:"container",children:Object(O.jsx)("h1",{className:"display-4",children:this.state.city})})}),Object(O.jsx)("div",{className:"dropdown",children:Object(O.jsxs)(x.a,{children:[Object(O.jsx)(x.a.Toggle,{variant:"secondary",id:"dropdown-basic",children:this.state.city}),Object(O.jsxs)(x.a.Menu,{children:[Object(O.jsx)(x.a.Item,{onSelect:function(){return e.selectCity("Delhi")},children:"Delhi"}),Object(O.jsx)(x.a.Item,{onSelect:function(){return e.selectCity("Chandigarh")},children:"Chandigarh"})]})]})}),Object(O.jsxs)("div",{className:"date d-none d-lg-block",children:["on ",this.state.dateUpdated," 2021"]}),Object(O.jsx)("div",{className:"switch",children:Object(O.jsx)(p.a,{variant:"secondary",onClick:function(){return e.switchApproach()},children:"aggressive"===this.state.selectedType?"Switch to conservative":"Switch to aggressive"})}),Object(O.jsx)("div",{className:"first",children:Object(O.jsxs)("div",{className:"row",children:[Object(O.jsx)("div",{className:"col-md-6 d-none d-lg-block",children:Object(O.jsx)("div",{id:"metric",children:Object(O.jsx)(v.a,{data:this.state.plotsData,layout:this.state.plotLayout})})}),Object(O.jsx)("div",{className:"col-md-4 col-sm-8",children:Object(O.jsxs)("div",{className:"left",children:[Object(O.jsxs)("div",{className:"risk-card risk card",children:[Object(O.jsx)("div",{className:"card-header",children:Object(O.jsx)("h2",{className:"lead font-weight-bold",children:"Today's Risk Score"})}),Object(O.jsx)("div",{className:"risk card-body",style:{backgroundColor:"RED"===this.state.categoryToday?"rgb(255, 77, 77)":"GREEN"===this.state.categoryToday?"#238823":"YELLOW"===this.state.categoryToday?"#ffbf00":"#eaeaec",fontWeight:"bold",textAlign:"center"},children:Object(O.jsx)("span",{className:"risk-text",children:"RED"===this.state.categoryToday?"HIGH RISK":"GREEN"===this.state.categoryToday?"LOW RISK":"YELLOW"===this.state.categoryToday?"MEDIUM RISK":"INSUFFICIENT DATA TO CATEGORIZE"})})]}),Object(O.jsxs)("div",{className:"d-none d-lg-block last-changed-date",children:["Risk score last changed on ",this.state.lastChangeDate]}),Object(O.jsx)("div",{id:"status",children:Object(O.jsx)(v.a,{data:this.state.heatMapData,layout:this.state.heatMapLayout,config:this.state.heatMapConfig})}),Object(O.jsx)("div",{className:"d-none d-lg-block last-changed-text",children:"Status of last 90 days"})]})})]})}),Object(O.jsxs)("div",{className:"second",children:[Object(O.jsx)("h2",{className:"display-4 text-center",children:"Suggested Policy Actions"}),Object(O.jsx)("br",{}),Object(O.jsxs)("div",{className:"row",children:[Object(O.jsx)("div",{className:"col-md-4",children:Object(O.jsxs)("div",{className:"action card",children:[Object(O.jsx)("div",{className:"card-header",style:{backgroundColor:"#d8e2dc"},children:Object(O.jsx)("p",{className:"lead",children:"Gatherings"})}),Object(O.jsx)("div",{className:"card-body",children:k})]})}),Object(O.jsx)("div",{className:"col-md-4",children:Object(O.jsxs)("div",{className:"action card",children:[Object(O.jsx)("div",{className:"card-header",style:{backgroundColor:"#d8e2dc"},children:Object(O.jsx)("p",{className:"lead",children:"Closures"})}),Object(O.jsx)("div",{className:"card-body",children:o})]})}),Object(O.jsx)("div",{className:"col-md-4",children:Object(O.jsxs)("div",{className:"action card",children:[Object(O.jsx)("div",{className:"card-header",style:{backgroundColor:"#d8e2dc"},children:Object(O.jsx)("p",{className:"lead",children:"Travel"})}),Object(O.jsx)("div",{className:"card-body",children:i})]})}),Object(O.jsx)("div",{className:"col-md-4",children:Object(O.jsxs)("div",{className:"action card",children:[Object(O.jsx)("div",{className:"card-header",style:{backgroundColor:"#fcd5ce"},children:Object(O.jsx)("p",{className:"lead",children:"Medical Preparedness"})}),Object(O.jsx)("div",{className:"card-body",children:s})]})}),Object(O.jsx)("div",{className:"col-md-4",children:Object(O.jsxs)("div",{className:"action card",children:[Object(O.jsx)("div",{className:"card-header",style:{backgroundColor:"#fcd5ce"},children:Object(O.jsx)("p",{className:"lead",children:"Testing"})}),Object(O.jsx)("div",{className:"card-body",children:d})]})}),Object(O.jsx)("div",{className:"col-md-4",children:Object(O.jsxs)("div",{className:"action card",children:[Object(O.jsx)("div",{className:"card-header",style:{backgroundColor:"#fcd5ce"},children:Object(O.jsx)("p",{className:"lead",children:"Vaccination"})}),Object(O.jsx)("div",{className:"card-body",children:_})]})}),Object(O.jsx)("div",{className:"col-md-4",children:Object(O.jsxs)("div",{className:"action card",children:[Object(O.jsx)("div",{className:"card-header",style:{backgroundColor:"#fcd5ce"},children:Object(O.jsx)("p",{className:"lead",children:"Contact Tracing"})}),Object(O.jsx)("div",{className:"card-body",children:j})]})}),Object(O.jsx)("div",{className:"col-md-4",children:Object(O.jsxs)("div",{className:"action card",children:[Object(O.jsx)("div",{className:"card-header",style:{backgroundColor:"#ffd7ba"},children:Object(O.jsx)("p",{className:"lead",children:"Communication "})}),Object(O.jsx)("div",{className:"card-body",children:b})]})}),Object(O.jsx)("div",{className:"col-md-4",children:Object(O.jsxs)("div",{className:"action card",children:[Object(O.jsx)("div",{className:"card-header",style:{backgroundColor:"#ffd7ba"},children:Object(O.jsx)("p",{className:"lead",children:"Data"})}),Object(O.jsx)("div",{className:"card-body",children:g})]})}),Object(O.jsx)("div",{className:"col-md-4",children:Object(O.jsxs)("div",{className:"action card",children:[Object(O.jsx)("div",{className:"card-header",style:{backgroundColor:"#ffd7ba"},children:Object(O.jsx)("p",{className:"lead",children:"Public Leadership"})}),Object(O.jsx)("div",{className:"card-body",children:y})]})}),Object(O.jsx)("div",{className:"col-md-4",children:Object(O.jsxs)("div",{className:"action card",children:[Object(O.jsx)("div",{className:"card-header",style:{backgroundColor:"#ffd7ba"},children:Object(O.jsx)("p",{className:"lead",children:"Mask Wearing and Ventilation"})}),Object(O.jsx)("div",{className:"card-body",children:T})]})}),Object(O.jsx)("div",{className:"col-md-4",children:Object(O.jsxs)("div",{className:"action card",children:[Object(O.jsx)("div",{className:"card-header",style:{backgroundColor:"#ffd7ba"},children:Object(O.jsx)("p",{className:"lead",children:"Physical Distancing and Hygiene"})}),Object(O.jsx)("div",{className:"card-body",children:w})]})})]})]})]})}}]),t}(c.Component),_=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,104)).then((function(a){var t=a.getCLS,c=a.getFID,s=a.getFCP,n=a.getLCP,i=a.getTTFB;t(e),c(e),s(e),n(e),i(e)}))};i.a.render(Object(O.jsx)(s.a.StrictMode,{children:Object(O.jsx)(N,{})}),document.getElementById("root")),_()}},[[97,1,2]]]);
//# sourceMappingURL=main.40c3249f.chunk.js.map