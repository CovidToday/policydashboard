(this.webpackJsonpdashboard=this.webpackJsonpdashboard||[]).push([[0],{46:function(e,a,t){},48:function(e,a,t){},92:function(e,a,t){"use strict";t.r(a);var c=t(0),s=t.n(c),n=t(8),i=t.n(n),r=(t(46),t(14)),l=t.n(r),d=t(33),o=t(34),h=t(35),j=t(41),b=t(40),m=(t.p,t(48),t(49),t(36)),u=t.n(m),g=t(15),f=t.n(g),y=t(16),x=t.n(y),v=t(98),O=t(1),p=function(e){Object(j.a)(t,e);var a=Object(b.a)(t);function t(e){var c;return Object(o.a)(this,t),(c=a.call(this,e)).state={cardsData:[],dataFromJson:{},heatmapFromJson:{},plotsData:[],plotLayout:[],heatMapData:[],heatMapLayout:[],heatMapConfig:[],categoryToday:"",city:"",dateUpdated:"",lastChangeDate:""},c}return Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;u.a.init({key:"1-VF4_JFPZ5-mZGqdx0y0X_9CIc6WY-RMzeQjvxXNvZE",callback:function(a){console.log("google sheet data ---\x3e",a),e.setState({cardsData:a})},simpleSheet:!0}),this.getData()}},{key:"getData",value:function(){var e=Object(d.a)(l.a.mark((function e(){var a,t=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("https://raw.githubusercontent.com/aberrantdoc/policydashboard/master/district_data/actual.json").then((function(e){t.setState({dataFromJson:e.data})}));case 2:return e.next=4,f.a.get("https://raw.githubusercontent.com/aberrantdoc/policydashboard/master/district_data/demo.json").then((function(e){t.setState({heatmapFromJson:e.data})}));case 4:a=[],(a=this.state.dataFromJson&&Object.keys(this.state.dataFromJson)).pop(),this.setState({city:a[0]}),this.setData(a[0]);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setData",value:function(e){var a=this.state.dataFromJson,t=this.state.heatmapFromJson;if(a){var c=[{type:"indicator",mode:"number+gauge",value:a[e].pct_ICU[a[e].pct_ICU.length-1],number:{suffix:"%",font:{size:20}},align:"right",domain:{x:[.5,1],y:[.05,.15]},title:{text:"ICU Vacancy (%)  ",font:{size:20}},gauge:{shape:"bullet",axis:{range:[null,100]},threshold:{line:{color:"3d3d5c",width:2},thickness:.75,value:a[e].pct_ICU[a[e].pct_ICU.length-14]},steps:[{range:[0,40],color:"ff4d4d"},{range:[40,80],color:"FFBF00"},{range:[80,100],color:"238823"}],bar:{color:"1f1f2e"}}},{type:"indicator",mode:"number+gauge",value:a[e].daily_tests_per_million_14ma[a[e].daily_tests_per_million_14ma.length-1],number:{font:{size:20}},align:"right",domain:{x:[.5,1],y:[.22,.32]},title:{text:"Tests Per Million  ",font:{size:20}},gauge:{shape:"bullet",axis:{range:[null,5e3]},threshold:{line:{color:"3d3d5c",width:2},thickness:.75,value:a[e].daily_tests_per_million_14ma[a[e].daily_tests_per_million_14ma.length-14]},steps:[{range:[0,140],color:"ff4d4d"},{range:[140,5e3],color:"238823"}],bar:{color:"1f1f2e"}}},{type:"indicator",mode:"number+gauge",value:a[e].TPR[a[e].TPR.length-1],number:{suffix:"%",font:{size:20}},align:"right",domain:{x:[.5,1],y:[.39,.49]},title:{text:"Tests Positivity (%)  ",font:{size:20}},gauge:{shape:"bullet",axis:{range:[null,100]},threshold:{line:{color:"3d3d5c",width:2},thickness:.75,value:a[e].TPR[a[e].TPR.length-14]},steps:[{range:[0,5],color:"238823"},{range:[5,10],color:"FFBF00"},{range:[10,100],color:"ff4d4d"}],bar:{color:"1f1f2e"}}},{type:"indicator",mode:"number+gauge",value:a[e].rate_increase_new_cases[a[e].rate_increase_new_cases.length-1],number:{suffix:"%",font:{size:20}},align:"right",domain:{x:[.5,1],y:[.56,.66]},title:{text:"Case Growth Rate (%)  ",font:{size:20}},gauge:{shape:"bullet",axis:{range:[-50,100]},threshold:{line:{color:"3d3d5c",width:2},thickness:.75,value:a[e].rate_increase_new_cases[a[e].rate_increase_new_cases.length-14]},steps:[{range:[-50,2],color:"238823"},{range:[2,5],color:"FFBF00"},{range:[5,100],color:"ff4d4d"}],bar:{color:"1f1f2e"}}},{type:"indicator",mode:"number+gauge",value:a[e].daily_cases_per_million[a[e].daily_cases_per_million.length-1],number:{font:{size:20}},align:"right",domain:{x:[.5,1],y:[.73,.83]},title:{text:"Cases Per Million  ",font:{size:20}},gauge:{shape:"bullet",axis:{range:[null,2e3]},threshold:{line:{color:"3d3d5c",width:2},thickness:.75,value:a[e].daily_cases_per_million[a[e].daily_cases_per_million.length-14]},steps:[{range:[0,20],color:"238823"},{range:[20,100],color:"FFBF00"},{range:[100,2e3],color:"ff4d4d"}],bar:{color:"1f1f2e"}}}],s=t[e].category,n=[{z:[(s=(s=(s=(s=s.map((function(e){return e.replace("GRAY",3)}))).map((function(e){return e.replace("YELLOW",2)}))).map((function(e){return e.replace("GREEN",1)}))).map((function(e){return e.replace("RED",0)}))).slice(s.length-90)],colorscale:[[0,"rgb(255, 77, 77)"],[.33,"rgb(255, 77, 77)"],[.33,"#238823"],[.67,"#238823"],[.67,"#ffbf00"],[1,"#ffbf00"]],type:"heatmap",showscale:!1,y:[" "]}],i=a[e].category[a[e].category.length-1],r=a[e].dates[a[e].dates.length-1],l=t[e].is_change,d=l[l.length-1],o=l.reverse().findIndex((function(e){return e!==d}));l.reverse();var h=t[e].dates,j=h.reverse()[o];h.reverse(),this.setState({plotsData:c,plotLayout:{width:750,height:500,margin:{t:10,r:25,l:25,b:10}},heatMapData:n,heatMapLayout:{width:500,height:50,margin:{t:10,r:25,l:25,b:10}},heatMapConfig:{responsive:!0},categoryToday:i,dateUpdated:r,lastChangeDate:j})}}},{key:"selectCity",value:function(e){this.setState({city:e}),this.setData(e)}},{key:"render",value:function(){var e=this,a=this.state.cardsData,t=this.state.categoryToday&&this.state.categoryToday.toLowerCase().charAt(0).toUpperCase()+this.state.categoryToday.toLowerCase().slice(1),c=a.filter((function(e){return"Medical Preparedness"===e.Domain})),s="";c.forEach((function(e){"1"===e[t]&&(s+="- ",s+=e.Policy,s+="\n")})),console.log(s);var n=a.filter((function(e){return"Mobility"===e.Domain})),i="";n.forEach((function(e){"1"===e[t]&&(i+="- ",i+=e.Policy,i+="\n")}));var r=a.filter((function(e){return"Testing"===e.Domain})),l="";r.forEach((function(e){"1"===e[t]&&(l+="- ",l+=e.Policy,l+="\n")}));var d=a.filter((function(e){return"Closures"===e.Domain})),o="";d.forEach((function(e){"1"===e[t]&&(o+="- ",o+=e.Policy,o+="\n")}));var h=a.filter((function(e){return"Contact Tracing"===e.Domain})),j="";h.forEach((function(e){"1"===e[t]&&(j+="- ",j+=e.Policy,j+="\n")}));var b=a.filter((function(e){return"Communication"===e.Domain})),m="";b.forEach((function(e){"1"===e[t]&&(m+="- ",m+=e.Policy,m+="\n")}));var u=a.filter((function(e){return"Data"===e.Domain})),g="";u.forEach((function(e){"1"===e[t]&&(g+="- ",g+=e.Policy,g+="\n")}));var f=a.filter((function(e){return"Public Leadership"===e.Domain})),y="";f.forEach((function(e){"1"===e[t]&&(y+="- ",y+=e.Policy,y+="\n")}));var p=a.filter((function(e){return"Vaccinations"===e.Domain})),N="";p.forEach((function(e){"1"===e[t]&&(N+="- ",N+=e.Policy,N+="\n")}));var _=a.filter((function(e){return"Gatherings"===e.Domain})),C="";_.forEach((function(e){"1"===e[t]&&(C+="- ",C+=e.Policy,C+="\n")}));var k=a.filter((function(e){return"Mask Wearing and Ventilation"===e.Domain})),D="";k.forEach((function(e){"1"===e[t]&&(D+="- ",D+=e.Policy,D+="\n")}));var E=a.filter((function(e){return"Physical Distancing and Hygiene"===e.Domain})),T="";return E.forEach((function(e){"1"===e[t]&&(T+="- ",T+=e.Policy,T+="\n")})),Object(O.jsxs)("div",{className:"App",children:[Object(O.jsx)("div",{className:"heading jumbotron-fluid",style:{backgroundColor:"black"},children:Object(O.jsx)("div",{className:"container",children:Object(O.jsx)("h1",{className:"display-4",children:this.state.city})})}),Object(O.jsx)("div",{className:"dropdown",children:Object(O.jsxs)(v.a,{children:[Object(O.jsx)(v.a.Toggle,{variant:"secondary",id:"dropdown-basic",children:this.state.city}),Object(O.jsxs)(v.a.Menu,{children:[Object(O.jsx)(v.a.Item,{onSelect:function(){return e.selectCity("Delhi")},children:"Delhi"}),Object(O.jsx)(v.a.Item,{onSelect:function(){return e.selectCity("Chandigarh")},children:"Chandigarh"})]})]})}),Object(O.jsxs)("div",{className:"date d-none d-lg-block",children:["on ",this.state.dateUpdated," 2021"]}),Object(O.jsx)("div",{className:"first",children:Object(O.jsxs)("div",{className:"row",children:[Object(O.jsx)("div",{className:"col-md-6 d-none d-lg-block",children:Object(O.jsx)("div",{id:"metric",children:Object(O.jsx)(x.a,{data:this.state.plotsData,layout:this.state.plotLayout})})}),Object(O.jsx)("div",{className:"col-md-4 col-sm-8",children:Object(O.jsxs)("div",{className:"left",children:[Object(O.jsxs)("div",{className:"risk-card risk card",children:[Object(O.jsx)("div",{className:"card-header",children:Object(O.jsx)("h2",{className:"lead font-weight-bold",children:"Today's Risk Score"})}),Object(O.jsx)("div",{className:"risk card-body",style:{backgroundColor:"RED"===this.state.categoryToday?"rgb(255, 77, 77)":"GREEN"===this.state.categoryToday?"#238823":"YELLOW"===this.state.categoryToday?"#ffbf00":"#eaeaec",fontWeight:"bold",textAlign:"center"},children:Object(O.jsx)("span",{className:"risk-text",children:"RED"===this.state.categoryToday?"HIGH RISK":"GREEN"===this.state.categoryToday?"LOW RISK":"YELLOW"===this.state.categoryToday?"MEDIUM RISK":"INSUFFICIENT DATA TO CATEGORIZE"})})]}),Object(O.jsxs)("div",{className:"d-none d-lg-block last-changed-date",children:["Risk score last changed on ",this.state.lastChangeDate]}),Object(O.jsx)("div",{id:"status",children:Object(O.jsx)(x.a,{data:this.state.heatMapData,layout:this.state.heatMapLayout,config:this.state.heatMapConfig})}),Object(O.jsx)("div",{className:"d-none d-lg-block last-changed-text",children:"Status of last 90 days"})]})})]})}),Object(O.jsxs)("div",{className:"second",children:[Object(O.jsx)("h2",{className:"display-4 text-center",children:"Suggested Policy Actions"}),Object(O.jsx)("br",{}),Object(O.jsxs)("div",{className:"row",children:[Object(O.jsx)("div",{className:"col-md-4",children:Object(O.jsxs)("div",{className:"action card",children:[Object(O.jsx)("div",{className:"card-header",style:{backgroundColor:"#d8e2dc"},children:Object(O.jsx)("p",{className:"lead",children:"Gatherings"})}),Object(O.jsx)("div",{className:"card-body",children:C})]})}),Object(O.jsx)("div",{className:"col-md-4",children:Object(O.jsxs)("div",{className:"action card",children:[Object(O.jsx)("div",{className:"card-header",style:{backgroundColor:"#d8e2dc"},children:Object(O.jsx)("p",{className:"lead",children:"Closures"})}),Object(O.jsx)("div",{className:"card-body",children:o})]})}),Object(O.jsx)("div",{className:"col-md-4",children:Object(O.jsxs)("div",{className:"action card",children:[Object(O.jsx)("div",{className:"card-header",style:{backgroundColor:"#d8e2dc"},children:Object(O.jsx)("p",{className:"lead",children:"Travel"})}),Object(O.jsx)("div",{className:"card-body",children:i})]})}),Object(O.jsx)("div",{className:"col-md-4",children:Object(O.jsxs)("div",{className:"action card",children:[Object(O.jsx)("div",{className:"card-header",style:{backgroundColor:"#fcd5ce"},children:Object(O.jsx)("p",{className:"lead",children:"Medical Preparedness"})}),Object(O.jsx)("div",{className:"card-body",children:s})]})}),Object(O.jsx)("div",{className:"col-md-4",children:Object(O.jsxs)("div",{className:"action card",children:[Object(O.jsx)("div",{className:"card-header",style:{backgroundColor:"#fcd5ce"},children:Object(O.jsx)("p",{className:"lead",children:"Testing"})}),Object(O.jsx)("div",{className:"card-body",children:l})]})}),Object(O.jsx)("div",{className:"col-md-4",children:Object(O.jsxs)("div",{className:"action card",children:[Object(O.jsx)("div",{className:"card-header",style:{backgroundColor:"#fcd5ce"},children:Object(O.jsx)("p",{className:"lead",children:"Vaccination"})}),Object(O.jsx)("div",{className:"card-body",children:N})]})}),Object(O.jsx)("div",{className:"col-md-4",children:Object(O.jsxs)("div",{className:"action card",children:[Object(O.jsx)("div",{className:"card-header",style:{backgroundColor:"#fcd5ce"},children:Object(O.jsx)("p",{className:"lead",children:"Contact Tracing"})}),Object(O.jsx)("div",{className:"card-body",children:j})]})}),Object(O.jsx)("div",{className:"col-md-4",children:Object(O.jsxs)("div",{className:"action card",children:[Object(O.jsx)("div",{className:"card-header",style:{backgroundColor:"#ffd7ba"},children:Object(O.jsx)("p",{className:"lead",children:"Communication "})}),Object(O.jsx)("div",{className:"card-body",children:m})]})}),Object(O.jsx)("div",{className:"col-md-4",children:Object(O.jsxs)("div",{className:"action card",children:[Object(O.jsx)("div",{className:"card-header",style:{backgroundColor:"#ffd7ba"},children:Object(O.jsx)("p",{className:"lead",children:"Data"})}),Object(O.jsx)("div",{className:"card-body",children:g})]})}),Object(O.jsx)("div",{className:"col-md-4",children:Object(O.jsxs)("div",{className:"action card",children:[Object(O.jsx)("div",{className:"card-header",style:{backgroundColor:"#ffd7ba"},children:Object(O.jsx)("p",{className:"lead",children:"Public Leadership"})}),Object(O.jsx)("div",{className:"card-body",children:y})]})}),Object(O.jsx)("div",{className:"col-md-4",children:Object(O.jsxs)("div",{className:"action card",children:[Object(O.jsx)("div",{className:"card-header",style:{backgroundColor:"#ffd7ba"},children:Object(O.jsx)("p",{className:"lead",children:"Mask Wearing and Ventilation"})}),Object(O.jsx)("div",{className:"card-body",children:D})]})}),Object(O.jsx)("div",{className:"col-md-4",children:Object(O.jsxs)("div",{className:"action card",children:[Object(O.jsx)("div",{className:"card-header",style:{backgroundColor:"#ffd7ba"},children:Object(O.jsx)("p",{className:"lead",children:"Physical Distancing and Hygiene"})}),Object(O.jsx)("div",{className:"card-body",children:T})]})})]})]})]})}}]),t}(c.Component),N=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,99)).then((function(a){var t=a.getCLS,c=a.getFID,s=a.getFCP,n=a.getLCP,i=a.getTTFB;t(e),c(e),s(e),n(e),i(e)}))};i.a.render(Object(O.jsx)(s.a.StrictMode,{children:Object(O.jsx)(p,{})}),document.getElementById("root")),N()}},[[92,1,2]]]);
//# sourceMappingURL=main.7556dbd9.chunk.js.map